[1;3;32m________________________________________________________________________________

    linux_api_headers (<0.1 SBU; 924 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    man-pages (<0.1 SBU; 28 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    glibc (24 SBU; 2.8 GB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    _lfs_basic_system_configure_glibc
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    zlib (<0.1 SBU; 4.4 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    file (0.1 SBU; 18 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    readline (0.1 SBU; 18 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # Reinstalling Readline will cause the old libraries to be moved to <libraryname>.old.
    # While this is normally not a problem, in some cases it can trigger a linking bug in ldconfig.
    # This can be avoided by issuing the following two seds:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # Now move the dynamic libraries to a more appropriate location and fix up some permissions and symbolic links:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # install the documentation:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    m4 (0.4 SBU; 33 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    First, make some fixes required by glibc-2.28:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    bc (0.1 SBU; 4.1 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # First, change an internal script to use sed instead of ed:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # Create temporary symbolic links so the package can find the readline library and confirm that its required libncurses library is available.
    # Even though the libraries are in /tools/lib at this point, the system will use /usr/lib at the end of this chapter.
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # Fix an issue in configure due to missing files in the early stages of LFS:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # To test bc, run the commands below.
    # There is quite a bit of output, so you may want to redirect it to a file.
    # There are a very small percentage of tests (10 of 12,144) that will indicate a round off error at the last digit.
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # now examin [0;36mtest_checklib.output
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    binutils (6.6 SBU; 4.9 GB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Verify that the PTYs are working properly inside the chroot environment by performing a simple test:
    
................................................................................[0m
[0;3;36m
    # This command should output the following.
[0;1;36m
    spawn ls
[0;3;35m
    # If, instead, the output includes the message below, then the environment is not set up for proper PTY operation.
    # This issue needs to be resolved before running the test suites for Binutils and GCC:
[0;1;35m
    The system has no more ptys.

    Ask your system administrator to create more.
    
[0m
[1;3;32m________________________________________________________________________________

    # The Binutils documentation recommends building Binutils in a dedicated build directory:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    # [1;33mThe test suite for Binutils in this section is considered critical. Do not skip it under any circumstances.
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    gmp (1.3 SBU; 61 MB)
    
................................................................................[0m
[7;33mNote[0m[33m__________________________________________________[0m
[0;33m
    If you are building for 32-bit x86, but you have a CPU which is capable of running 64-bit code
    and you have specified CFLAGS in the environment, the configure script will attempt to configure for 64-bits and fail.
    Avoid this by invoking the configure command below with
[0;1;33m
    ABI=32 ./configure ...
    
[0m
[7;33mNote[0m[33m__________________________________________________[0m
[0;33m
    The default settings of GMP produce libraries optimized for the host processor.
    If libraries suitable for processors less capable than the host CPU are desired,
    generic libraries can be created by running the following:
[0;1;33m
    cp -v configfsf.guess config.guess

    cp -v configfsf.sub   config.sub
    
[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[7;31mImportant[0m[31m__________________________________________________[0m
[0;31m
    The test suite for GMP in this section is considered critical.
    Do not skip it under any circumstances.
    
[0;1;31m
[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[7;31mImportant[0m[31m__________________________________________________[0m
[0;31m
    The code in gmp is highly optimized for the processor where it is built.
    Occasionally, the code that detects the processor misidentifies the system capabilities
    and there will be errors in the tests or other applications using the gmp libraries with the message "Illegal instruction".
    In this case, gmp should be reconfigured with the option --build=x86_64-unknown-linux-gnu and rebuilt.
    
[0;1;31m
[0m
[1;3;32m________________________________________________________________________________

    Ensure that all 190 tests in the test suite passed. Check the results by issuing the following command:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    mpfr (1.1 SBU; 36 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    mpc (0.3 SBU; 22 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    shadow (0.2 SBU; 46 MB)
    
................................................................................[0m
[7;33mNote[0m[33m__________________________________________________[0m
[0;33m
    If you would like to enforce the use of strong passwords, refer to
    http://www.linuxfromscratch.org/blfs/view/8.3/postlfs/cracklib.html
    for installing CrackLib prior to building Shadow.
    Then add --with-libcrack to the configure command below.
    
[0;1;33m
[0m
[1;3;32m________________________________________________________________________________

    Disable the installation of the groups program and its man pages, as Coreutils provides a better version.
    Also Prevent the installation of manual pages that were already installed by the man pages package:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Instead of using the default crypt method, use the more secure SHA-512 method of password encryption,
    which also allows passwords longer than 8 characters.
    It is also necessary to change the obsolete /var/spool/mail location for user mailboxes
    that Shadow uses by default to the /var/mail location used currently:
    
................................................................................[0m
[7;33mNote[0m[33m__________________________________________________[0m
[0;33m
    If you chose to build Shadow with Cracklib support, run the following:
[0;1;33m
    sed -i 's@DICTPATH.*@DICTPATH	/lib/cracklib/pw_dict@' etc/login.defs
    
[0m
[1;3;32m________________________________________________________________________________

    Make a minor change to make the first group number generated by useradd 1000:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Prepare Shadow for compilation:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Move a misplaced program to its proper location:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    _lfs_basic_system_configure_shadow
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    This package contains utilities to add, modify, and delete users and groups;
    set and change their passwords; and perform other administrative tasks.
    For a full explanation of what password shadowing means, see the doc/HOWTO file within the unpacked source tree.
    If using Shadow support, keep in mind that programs which need to verify passwords
    (display managers, FTP programs, pop3 daemons, etc.) must be Shadow-compliant.
    That is, they need to be able to work with shadowed passwords.
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    enable shadowed passwords
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    enable shadowed group passwords
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Shadow's stock configuration for the useradd utility has a few caveats that need some explanation.

    - First, the default action for the useradd utility is to create the user and a group of the same name as the user.

      By default the user ID (UID) and group ID (GID) numbers will begin with 1000.

      This means if you dont pass parameters to useradd, each user will be a member of a unique group on the system.

    If this behavior is undesirable, youll need to pass the -g parameter to useradd.

    The default parameters are stored in the /etc/default/useradd file.

    You may need to modify two parameters in this file to suit your particular needs.

    

    
................................................................................[0m
[7;32m
    /etc/default/useradd[0m[32m__________________________________________________[0m
[0;32mParameter Explanations
[0;1;32m
    

    GROUP=1000

    ----------

    This parameter sets the beginning of the group numbers used in the /etc/group file.

    You can modify it to anything you desire.

    Note that useradd will never reuse a UID or GID.

    If the number identified in this parameter is used, it will use the next available number after this.

    Note also that if you dont have a group 1000 on your system the first time you use useradd without the -g parameter,

    youll get a message displayed on the terminal that says: useradd: unknown GID 1000.

    You may disregard this message and group number 1000 will be used.

    

    CREATE_MAIL_SPOOL=yes

    ---------------------

    This parameter causes useradd to create a mailbox file for the newly created user.

    useradd will make the group ownership of this file to the mail group with 0660 permissions.

    If you would prefer that these mailbox files are not created by useradd, issue the following command:

    
[0m
[1;3;32m________________________________________________________________________________

    # 6.20.3. Setting the root password
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    gcc (92 SBU; 4 GB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    If building on x86_64, change the default directory name for 64-bit libraries to ‚Äúlib‚Äù:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Remove the symlink created earlier as the final gcc includes will be installed here:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    The GCC documentation recommends building GCC in a dedicated build directory:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Prepare GCC for compilation:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    compile
    
................................................................................[0m
[7;31mImportant[0m[31m__________________________________________________[0m
[0;31m
    In this section, the test suite for GCC is considered critical. Do not skip it under any circumstance.
    
[0;1;31m
[0m
[1;3;32m________________________________________________________________________________

    One set of tests in the GCC test suite is known to exhaust the stack, so increase the stack size prior to running the tests:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Remove one test known to cause a problem:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Test the results as a non-privileged user, but do not stop at errors:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    To receive a summary of the test suite results, run:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    For only the summaries, pipe the output through grep -A7 Summ.
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Results can be compared with those located at http://www.linuxfromscratch.org/lfs/build-logs/8.3/ and https://gcc.gnu.org/ml/gcc-testresults/.
    A few unexpected failures cannot always be avoided.
    The GCC developers are usually aware of these issues, but have not resolved them yet.
    Unless the test results are vastly different from those at the above URL, it is safe to continue.
    
................................................................................[0m
[7;33mNote[0m[33m__________________________________________________[0m
[0;33m
    On some combinations of kernel configuration and AMD processors there may be more than 1100 failures
    in the gcc.target/i386/mpx tests (which are designed to test the MPX option on recent Intel processors).
    These can safely be ignored on AMD processors.
    These tests will also fail on Intel processors if MPX support is not enabled in the kernel even though it is present on the CPU.
    
[0;1;33m
[0m
[1;3;32m________________________________________________________________________________

    make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Create a symlink required by the FHS for "historical" reasons.
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Many packages use the name cc to call the C compiler. To satisfy those packages, create a symlink:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Add a compatibility symlink to enable building programs with Link Time Optimization (LTO):
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Now that our final toolchain is in place, it is important to again ensure that compiling and linking will work as expected.
    We do this by performing the same sanity checks as we did earlier in the chapter:
    
................................................................................[0m
[0;3;36m
    There should be no errors, and the output of the last command will be (allowing for platform-specific differences in dynamic linker name):
[0;1;36m
    [Requesting program interpreter: /lib64/ld-linux-x86-64.so.2]
    
[0;3;35m
[0;1;35m
[0m
[1;3;32m________________________________________________________________________________

    Now make sure that we're setup to use the correct start files:
    
................................................................................[0m
[0;3;36m
    The output of the last command should be:
[0;1;36m
    /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.0/../../../../lib/crt1.o succeeded
    /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.0/../../../../lib/crti.o succeeded
    /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.0/../../../../lib/crtn.o succeeded
[0;3;35m
    Depending on your machine architecture, the above may differ slightly,
    the difference usually being the name of the directory after /usr/lib/gcc.
[0;1;35m
    The important thing to look for here is that gcc has found all three crt*.o files under the /usr/lib directory.
    
[0m
[1;3;32m________________________________________________________________________________

    Verify that the compiler is searching for the correct header files:
    
................................................................................[0m
[0;3;36m
    This command should return the following output:
[0;1;36m
    #include <...> search starts here:
     /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.0/include
     /usr/local/include
     /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.0/include-fixed
     /usr/include
[0;3;35m
    Again, note that the directory named after your target triplet may be different than the above, depending on your architecture.
    
[0;1;35m
[0m
[1;3;32m________________________________________________________________________________

    Next, verify that the new linker is being used with the correct search paths:
    
................................................................................[0m
[0;3;36m
    References to paths that have components with -linux-gnu should be ignored, but otherwise the output of the last command should be:
[0;1;36m
    SEARCH_DIR("/usr/x86_64-pc-linux-gnu/lib64")
    SEARCH_DIR("/usr/local/lib64")
    SEARCH_DIR("/lib64")
    SEARCH_DIR("/usr/lib64")
    SEARCH_DIR("/usr/x86_64-pc-linux-gnu/lib")
    SEARCH_DIR("/usr/local/lib")
    SEARCH_DIR("/lib")
    SEARCH_DIR("/usr/lib");
[0;3;35m
    A 32-bit system may see a few different directories. For example, here is the output from an i686 machine:
[0;1;35m
    SEARCH_DIR("/usr/i686-pc-linux-gnu/lib32")
    SEARCH_DIR("/usr/local/lib32")
    SEARCH_DIR("/lib32")
    SEARCH_DIR("/usr/lib32")
    SEARCH_DIR("/usr/i686-pc-linux-gnu/lib")
    SEARCH_DIR("/usr/local/lib")
    SEARCH_DIR("/lib")
    SEARCH_DIR("/usr/lib");
    
[0m
[1;3;32m________________________________________________________________________________

    Next make sure that we're using the correct libc:
    
................................................................................[0m
[0;3;36m
    The output of the last command should be:
[0;1;36m
    attempt to open /lib/libc.so.6 succeeded
    
[0;3;35m
[0;1;35m
[0m
[1;3;32m________________________________________________________________________________

    Lastly, make sure GCC is using the correct dynamic linker:
    
................................................................................[0m
[0;3;36m
    The output of the last command should be (allowing for platform-specific differences in dynamic linker name): 
[0;1;36m
    found ld-linux-x86-64.so.2 at /lib/ld-linux-x86-64.so.2 
[0;3;35m
    If the output does not appear as shown above or is not received at all, then something is seriously wrong.
    Investigate and retrace the steps to find out where the problem is and correct it.
    The most likely reason is that something went wrong with the specs file adjustment.
    Any issues will need to be resolved before continuing with the process.
    
[0;1;35m
[0m
[1;3;32m________________________________________________________________________________

    Once everything is working correctly, clean up the test files:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Finally, move a misplaced file:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    bzip2 (<0.1 SBU; 2.3 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Apply a patch that will install the documentation for this package:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    The following command ensures installation of symbolic links are relative:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Ensure the man pages are installed into the correct location:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Prepare Bzip2 for compilation with:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Compile and test the package:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Install the programs:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Install the shared bzip2 binary into the /bin directory, make some necessary symbolic links, and clean up:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    pkg-config (0.4 SBU; 30 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    ncurses (0.4 SBU; 42 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Don't install a static library that is not handled by configure:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Move the shared libraries to the /lib directory, where they are expected to reside:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Because the libraries have been moved, one symlink points to a non-existent file. Recreate it:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Many applications still expect the linker to be able to find non-wide-character Ncurses libraries.
    Trick such applications into linking with wide-character libraries by means of symlinks and linker scripts:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Finally, make sure that old applications that look for -lcurses at build time are still buildable:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    If desired, install the Ncurses documentation:
    
................................................................................[0m
[7;33mNote[0m[33m__________________________________________________[0m
[0;33m
    The instructions above don't create non-wide-character Ncurses libraries since no package installed
    by compiling from sources would link against them at runtime.
    However, the only known binary-only applications that link against non-wide-character Ncurses libraries require version 5.
    If you must have such libraries because of some binary-only application or to be compliant with LSB,
    build the package again with the following commands:
[0;1;33m
    make distclean
    ./configure --prefix=/usr    \
                --with-shared    \
                --without-normal \
                --without-debug  \
                --without-cxx-binding \
                --with-abi-version=5
    make sources libs
    cp -av lib/lib*.so.5* /usr/lib
    
[0m
[1;3;32m________________________________________________________________________________

    attr (<0.1 SBU; 4.2 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    The shared library needs to be moved to /lib, and as a result the .so
    file in /usr/lib will need to be recreated:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    acl (<0.1 SBU; 6.4 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    The shared library needs to be moved to /lib, and as a result the .so
    file in /usr/lib will need to be recreated:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    libcap (<0.1 SBU; 1.4 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Prevent a static library from being installed:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    This package does not come with a test suite.
    Install the package:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    The shared library needs to be moved to /lib, and as a result the .so
    file in /usr/lib will need to be recreated:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    sed (0.5 SBU; 30 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    First fix an issue in the LFS environment and remove a failing test:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Prepare Sed for compilation:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    psmisc (<0.1 SBU; 4.3 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Finally, move the killall and fuser programs to the location specified by the FHS:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    iana-etc (<0.1 SBU; 2.3 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    The following command converts the raw data provided by IANA into the correct formats
    for the /etc/protocols and /etc/services data files:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    bison (0.3 SBU; 35 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[7;33mNote[0m[33m__________________________________________________[0m
[0;33m
    There is a circular dependency between bison and flex with regard to the checks.
    If desired, after installing flex in the next section, the bison can be rebuilt
    and the bison checks can be run with make check.
    
[0;1;33m
[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    flex (0.4 SBU; 35 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    First, fix a problem introduced with glibc-2.26:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    The build procedure assumes the help2man program is available to create a man page from the executable --help option.
    This is not present, so we use an environment variable to skip this process. Now, prepare Flex for compilation:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    A few programs do not know about flex yet and try to run its predecessor, lex.
    To support those programs, create a symbolic link named lex that runs flex in lex emulation mode:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    grep (0.4 SBU; 31 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    bash (2.1 SBU; 58 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    To prepare the tests, ensure that the nobody user can write to the sources tree:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Now, run the tests as the nobody user:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Run the newly compiled bash program (replacing the one that is currently being executed):
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    libtool (1.9 SBU; 43 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    The test time for libtool can be reduced significantly on a system with multiple cores.
    To do this, append TESTSUITEFLAGS=-j<N> to the line below.
    For instance, using -j4 can reduce the test time by over 60 percent.
    
................................................................................[0m
[7;33mNote[0m[33m__________________________________________________[0m
[0;33m
    Five tests are known to fail in the LFS build environment due to a circular dependency,
    but all tests pass if rechecked after automake is installed.
    
[0;1;33m
[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    gdbm (0.1 SBU; 11 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    gperf (<0.1 SBU; 6.3 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    The tests are known to fail if running multiple simultaneous tests (-j option greater than 1).
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    expat (0.1 SBU; 11 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    First fix a problem with the regression tests in the LFS environment:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    install the documentation:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    inetutils (0.4 SBU; 29 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[7;33mNote[0m[33m__________________________________________________[0m
[0;33m
    One test, libls.sh, may fail in the initial chroot environment but will pass if the test is rerun after the LFS system is complete.
    One test, ping-localhost.sh, will fail if the host system does not have ipv6 capability.
    
[0;1;33m
[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Move some programs so they are available if /usr is not accessible:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    perl (9.1 SBU; 274 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    First create a basic /etc/hosts file to be referenced in one of Perl's configuration files as well as the optional test suite:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    This version of Perl now builds the Compress::Raw::Zlib and Compress::Raw::BZip2 modules.
    By default Perl will use an internal copy of the sources for the build.
    Issue the following command so that Perl will use the libraries installed on the system:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    To have full control over the way Perl is set up, you can remove the ‚Äú-des‚Äù options from the following command and hand-pick the way this package is built.
    Alternatively, use the command exactly as below to use the defaults that Perl auto-detects:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[7;33mNote[0m[33m__________________________________________________[0m
[0;33m
    One test fails due to using the most recent version of gdbm.
    
[0;1;33m
[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    XML-Parser (<0.1 SBU; 2.1 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    perl Makefile.PL
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make test
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    intltool (<0.1 SBU; 1.5 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    First fix a warning that is caused by perl-5.22 and later:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    autoconf (3.5 SBU; 17.3 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    several tests are skipped that use Automake.
    For full test coverage, Autoconf can be re-tested after Automake has been installed.
    In addition, two tests fail due to changes in libtool-2.4.3 and later.
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    automake (8.9 SBU; 107 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    xz (0.2 SBU; 16 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    kmod25 (0.1 SBU; 13 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    This package does not come with a test suite that can be run in the LFS chroot environment.
    At a minimum the git program is required and several tests will not run outside of a git repository.
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Install the package, and create symlinks for compatibility with Module-Init-Tools (the package that previously handled Linux kernel modules):
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    gettext (2.6 SBU; 210 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    First, suppress two invocations of test-lock which on some machines can loop forever:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Now fix a configuration file:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    libelf (1 SBU; 91 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Install only Libelf:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    libffi (0.4 SBU; 7.6 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Modify the Makefile to install headers into the standard /usr/include directory instead of /usr/lib/libffi-3.2.1/include.
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    openssl (1.7 SBU; 75 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make test
    One subtest in the test 40-test_rehash.t fails in the lfs chroot environment, but passes when run as a regular user.
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    install the documentation:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    python (1.3 SBU; 390 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[7;33mNote[0m[33m__________________________________________________[0m
[0;33m
    The test suite requires TK and and X Windows session and cannot be run until Python 3 is reinstalled in BLFS.
    
[0;1;33m
[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    install the preformatted documentation:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    ninja (0.2 SBU; 83 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    When run, ninja normally runs a maximum number of processes in parallel.
    By default this is the number of cores on the system plus two.
    In some cases this can overheat a CPU or run a system out of memory.
    If run from the command line, passing a -jN parameter will limit the number of parallel processes,
    but some packages embed the execution of ninja and do not pass a -j parameter.
    Using the optional patch below allows a user to limit the number of parallel processes via an environment variable, NINJAJOBS. For example setting:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    If desired, install the patch by running:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Build Ninja with:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    To test the results, issue:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    meson (<0.1 SBU; 21 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Compile Meson
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    systemd (1.1 SBU; 297 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Create a symlink to work around missing xsltproc:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Set up the man pages:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Remove tests that cannot be built in chroot:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Apply a patch to fix a build failure with glibc-2.28:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Remove an unneeded group, render, from the default udev rules:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    [2018-11-24] otherwise there is error:
    systemd error: result of ‚Äò1 << 31‚Äô requires 33 bits to represent, but ‚Äòint‚Äô only has 32 bits [-Werror=shift-overflow=]
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Prepare systemd for compilation:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Compile the package:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Install the package:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Remove an unnecessary directory:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Create the /etc/machine-id file needed by systemd-journald:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Create the /lib/systemd/systemd-user-sessions script to allow unprivileged user logins without systemd-logind:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    procps-ng (0.1 SBU; 17 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    The test suite needs some custom modifications for LFS.
    Remove a test that fails when scripting does not use a tty device and fix two others.
    To run the test suite, run the following commands:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Finally, move essential libraries to a location that can be found if /usr is not mounted.
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    e2fsprogs (1.6 SBU; 96 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    The E2fsprogs documentation recommends that the package be built in a subdirectory of the source tree:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    To set up and run the test suite we need to first link some libraries from /tools/lib to a location where the test programs look.
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Install the static libraries and headers:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Make the installed static libraries writable so debugging symbols can be removed later:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    This package installs a gzipped .info file but doesnt update the system-wide dir file. Unzip this file and then update the system dir file using the following commands:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    If desired, create and install some additional documentation by issuing the following commands:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    coreutils (3.3 SBU; 190 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    POSIX requires that programs from Coreutils recognize character boundaries correctly even in multibyte locales.
    The following patch fixes this non-compliance and other internationalization-related bugs.
    
................................................................................[0m
[7;33mNote[0m[33m__________________________________________________[0m
[0;33m
    In the past, many bugs were found in this patch.
    When reporting new bugs to Coreutils maintainers, please check first if they are reproducible without this patch.
    
[0;1;33m
[0m
[1;3;32m________________________________________________________________________________

    Suppress a test which on some machines can loop forever:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Now the test suite is ready to be run. First, run the tests that are meant to be run as user root:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    We are going to run the remainder of the tests as the nobody user.
    Certain tests, however, require that the user be a member of more than one group.
    So that these tests are not skipped well add a temporary group and make the user nobody a part of it:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Fix some of the permissions so that the non-root user can compile and run the tests:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Now run the tests. Make sure the PATH in the su environment includes /tools/bin.
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    The test program test-getlogin is known to fail in a partially built system environment like the chroot environment here,
    but passes if run at the end of this chapter. The test program tty.sh is also known to fail.
    Remove the temporary group:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Move programs to the locations specified by the FHS:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Some packages in BLFS and beyond expect the following programs in /bin, so make sure they are placed there:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    check (3.8 SBU; 12 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    diffutils (0.4 SBU; 33 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    gawk (0.4 SBU; 44 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    First, ensure some unneeded files are not installed:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    install the documentation:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    findutils (0.7 SBU; 51 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    First, suppress a test which on some machines can loop forever:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Next, make some fixes required by glibc-2.28:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Some packages in BLFS and beyond expect the find program in /bin, so make sure its placed there:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    groff (0.5 SBU; 90 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Groff expects the environment variable PAGE to contain the default paper size.
    For users in the United States, PAGE=letter is appropriate. Elsewhere, PAGE=A4 may be more suitable.
    While the default paper size is configured during compilation,
    it can be overridden later by echoing either ‚ÄúA4‚Äù or ‚Äúletter‚Äù to the /etc/papersize file.
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    This package does not support parallel build. Compile the package:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    grub (0.8 SBU; 147 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    less (<0.1 SBU; 3.9 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    gzip (0.1 SBU; 20 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    First, make some fixes required by glibc-2.28:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    Two tests are known to fail in the LFS environment: help-version and zmore.
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Move a program that needs to be on the root filesystem:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    iproute2 (0.2 SBU; 13 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    The arpd program included in this package will not be built since it is dependent on Berkeley DB, which is not installed in LFS.
    However, a directory for arpd and a man page will still be installed.
    Prevent this by running the commands below.
    If the arpd binary is needed, instructions for compiling Berkeley DB can be found in the BLFS Book at
    http://www.linuxfromscratch.org/blfs/view/8.3/server/databases.html#db.
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    It is also necessary to disable building two modules that requires http://www.linuxfromscratch.org/blfs/view/8.3/postlfs/iptables.html.
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    kbd (0.1 SBU; 30 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    The behaviour of the Backspace and Delete keys is not consistent across the keymaps in the Kbd package.
    The following patch fixes this issue for i386 keymaps:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    After patching, the Backspace key generates the character with code 127, and the Delete key generates a well-known escape sequence.
    Remove the redundant resizecons program (it requires the defunct svgalib to provide
    the video mode files - for normal use setfont sizes the console appropriately) together with its manpage.
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[7;33mNote[0m[33m__________________________________________________[0m
[0;33m
    For some languages (e.g., Belarusian) the Kbd package doesnt provide a useful keymap where
    the stock ‚Äúby‚Äù keymap assumes the ISO-8859-5 encoding, and the CP1251 keymap is normally used.
    Users of such languages have to download working keymaps separately.
    
[0;1;33m
[0m
[1;3;32m________________________________________________________________________________

    install the documentation:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    libpipeline (0.1 SBU; 8.2 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    make (0.6 SBU; 13 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Again, work around an error caused by glibc-2.27:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    The test suite needs to know where supporting perl files are located.
    We use an environment variable to accomplish this. To test the results, issue:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    patch (0.2 SBU; 13 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    dbus (0.2 SBU; 18 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    This package does come with a test suite, but it requires several packages that are not included in LFS.
    Instructions for running the test suite can be found in the BLFS book at
    http://www.linuxfromscratch.org/blfs/view/8.3/general/dbus.html.
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    The shared library needs to be moved to /lib, and as a result the .so file in /usr/lib will need to be recreated:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Create a symlink, so that D-Bus and systemd can use the same machine-id file:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    util-linux (1.1 SBU; 200 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    The FHS recommends using the /var/lib/hwclock directory instead of the usual /etc directory as the location for the adjtime file.
    First create a directory to enable storage for the hwclock program:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Remove the earlier created symlinks:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    If desired, run the test suite as a non-root user:
    
................................................................................[0m
[7;33mNote[0m[33m__________________________________________________[0m
[0;33m
    Running the test suite as the root user can be harmful to your system.
    To run it, the CONFIG_SCSI_DEBUG option for the kernel must be available in the currently running system, and must be built as a module.
    Building it into the kernel will prevent booting.
    For complete coverage, other BLFS packages must be installed.
    If desired, this test can be run after rebooting into the completed LFS system and running:
    
[0;1;33m
    bash tests/run.sh --srcdir=$PWD --builddir=$PWD

    
[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    man-db (0.2 SBU; 33 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    tar (2.8 SBU; 44 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    texinfo (1.1 SBU; 129 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Fix a file that creates a lot of failures in the regression checks:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make check
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Optionally, install the components belonging in a TeX installation:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    The Info documentation system uses a plain text file to hold its list of menu entries.
    The file is located at /usr/share/info/dir.
    Unfortunately, due to occasional problems in the Makefiles of various packages,
    it can sometimes get out of sync with the info pages installed on the system.
    If the /usr/share/info/dir file ever needs to be recreated, the following optional commands will accomplish the task:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    vim (1.6 SBU; 169 MB)
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    First, change the default location of the vimrc configuration file to /etc:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # configure
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make test
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    The test suite outputs a lot of binary data to the screen.
    This can cause issues with the settings of the current terminal.
    The problem can be avoided by redirecting the output to a log file as shown above.
    A successful test will result in the words "ALL DONE" in the log file at completion.
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    # make install
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Many users are used to using vi instead of vim.
    To allow execution of vim when users habitually enter vi,
    create a symlink for both the binary and the man page in the provided languages:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    By default, Vim documentation is installed in /usr/share/vim.
    The following symlink allows the documentation to be accessed via /usr/share/doc/vim-8.1,
    making it consistent with the location of documentation for other packages:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    If an X Window System is going to be installed on the LFS system, it may be necessary to recompile Vim after installing X.
    Vim comes with a GUI version of the editor that requires X and some additional libraries to be installed.
    For more information on this process, refer to the Vim documentation and the Vim installation page in the BLFS book at
    http://www.linuxfromscratch.org/blfs/view/8.3/postlfs/vim.html.
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    By default, vim runs in vi-incompatible mode.
    This may be new to users who have used other editors in the past.
    The ‚Äúnocompatible‚Äù setting is included below to highlight the fact that a new behavior is being used.
    It also reminds those who would change to ‚Äúcompatible‚Äù mode that it should be the first setting in the configuration file.
    This is necessary because it changes other settings, and overrides must come after this setting.
    Create a default vim configuration file by running the following:
    
................................................................................[0m
[1;3;32m________________________________________________________________________________

    Documentation for other available options can be obtained by running the following command:
    
................................................................................[0m
[7;33mNote[0m[33m__________________________________________________[0m
[0;33m
    By default, Vim only installs spell files for the English language.
    To install spell files for your preferred language, download the *.spl and optionally,
    the *.sug files for your language and character encoding from
    ftp://ftp.vim.org/pub/vim/runtime/spell/ and save them to /usr/share/vim/vim81/spell/.

    

    To use these spell files, some configuration in /etc/vimrc is needed, e.g.:

    

    set spelllang=en,ru

    set spell

    

    For more information, see the appropriate README file located at the URL above.

    
[0;1;33m
[0m
