'\" t
.TH "SYSTEMD\&.NETWORK" "5" "" "systemd 239" "systemd.network"
.\" -----------------------------------------------------------------
.\" * Define some portability stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------


  

  

  .SH "NAME"
systemd.network \- Network configuration


  .SH "SYNOPSIS"

    .PP
\fInetwork\fR\&.network

  

  .SH "DESCRIPTION"

    

    .PP
Network setup is performed by
\fBsystemd-networkd\fR(8)\&.


    .PP
The main network file must have the extension
\&.network; other extensions are ignored\&. Networks are applied to links whenever the links appear\&.


    .PP
The
\&.network
files are read from the files located in the system network directory
/usr/lib/systemd/network, the volatile runtime network directory
/run/systemd/network
and the local administration network directory
/etc/systemd/network\&. All configuration files are collectively sorted and processed in lexical order, regardless of the directories in which they live\&. However, files with identical filenames replace each other\&. Files in
/etc
have the highest priority, files in
/run
take precedence over files with the same name in
/usr/lib\&. This can be used to override a system\-supplied configuration file with a local file if needed\&. As a special case, an empty file (file size 0) or symlink with the same name pointing to
/dev/null
disables the configuration file entirely (it is "masked")\&.


    .PP
Along with the network file
foo\&.network, a "drop\-in" directory
foo\&.network\&.d/
may exist\&. All files with the suffix
\&.conf
from this directory will be parsed after the file itself is parsed\&. This is useful to alter or add configuration settings, without having to modify the main configuration file\&. Each drop\-in file must have appropriate section headers\&.


    .PP
In addition to
/etc/systemd/network, drop\-in
\&.d
directories can be placed in
/usr/lib/systemd/network
or
/run/systemd/network
directories\&. Drop\-in files in
/etc
take precedence over those in
/run
which in turn take precedence over those in
/usr/lib\&. Drop\-in files under any of these directories take precedence over the main netdev file wherever located\&. (Of course, since
/run
is temporary and
/usr/lib
is for vendors, it is unlikely drop\-ins should be used in either of those places\&.)


    .PP
Note that an interface without any static IPv6 addresses configured, and neither DHCPv6 nor IPv6LL enabled, shall be considered to have no IPv6 support\&. IPv6 will be automatically disabled for that interface by writing "1" to
/proc/sys/net/ipv6/conf/\fIifname\fR/disable_ipv6\&.

  

  .SH "[MATCH] SECTION OPTIONS"

    

      .PP
The network file contains a
[Match]
section, which determines if a given network file may be applied to a given device; and a
[Network]
section specifying how the device should be configured\&. The first (in lexical order) of the network files that matches a given device is applied, all later files are ignored, even if they match as well\&.


      .PP
A network file is said to match a device if each of the entries in the
[Match]
section matches, or if the section is empty\&. The following keys are accepted:


      

        .PP
\fIMACAddress=\fR
.RS 4

          
          
            A whitespace\-separated list of hardware addresses\&. Use full colon\-, hyphen\- or dot\-delimited hexadecimal\&. See the example below\&. This option may appear more than one, in which case the lists are merged\&. If the empty string is assigned to this option, the list of hardware addresses defined prior to this is reset\&.
.sp


            Example:
.sp
.if n \{\
.RS 4
.\}
.nf
MACAddress=01:23:45:67:89:ab 00\-11\-22\-33\-44\-55 AABB\&.CCDD\&.EEFF
.fi
.if n \{\
.RE
.\}


          
        .RE
        .PP
\fIPath=\fR
.RS 4

          
          
            A whitespace\-separated list of shell\-style globs matching the persistent path, as exposed by the udev property
ID_PATH\&. If the list is prefixed with a "!", the test is inverted; i\&.e\&. it is true when
ID_PATH
does not match any item in the list\&.

          
        .RE
        .PP
\fIDriver=\fR
.RS 4

          
          
            A whitespace\-separated list of shell\-style globs matching the driver currently bound to the device, as exposed by the udev property
DRIVER
of its parent device, or if that is not set the driver as exposed by
ethtool \-i
of the device itself\&. If the list is prefixed with a "!", the test is inverted\&.

          
        .RE
        .PP
\fIType=\fR
.RS 4

          
          
            A whitespace\-separated list of shell\-style globs matching the device type, as exposed by the udev property
DEVTYPE\&. If the list is prefixed with a "!", the test is inverted\&.

          
        .RE
        .PP
\fIName=\fR
.RS 4

          
          
            A whitespace\-separated list of shell\-style globs matching the device name, as exposed by the udev property
INTERFACE\&. If the list is prefixed with a "!", the test is inverted\&.

          
        .RE
        .PP
\fIHost=\fR
.RS 4

          
          
            Matches against the hostname or machine ID of the host\&. See
ConditionHost=
in
\fBsystemd.unit\fR(5)
for details\&.

          
        .RE
        .PP
\fIVirtualization=\fR
.RS 4

          
          
            Checks whether the system is executed in a virtualized environment and optionally test whether it is a specific implementation\&. See
ConditionVirtualization=
in
\fBsystemd.unit\fR(5)
for details\&.

          
        .RE
        .PP
\fIKernelCommandLine=\fR
.RS 4

          
          
            Checks whether a specific kernel command line option is set (or if prefixed with the exclamation mark unset)\&. See
ConditionKernelCommandLine=
in
\fBsystemd.unit\fR(5)
for details\&.

          
        .RE
        .PP
\fIKernelVersion=\fR
.RS 4

          
          
            Checks whether the kernel version (as reported by
\fBuname \-r\fR) matches a certain expression (or if prefixed with the exclamation mark does not match it)\&. See
ConditionKernelVersion=
in
\fBsystemd.unit\fR(5)
for details\&.

          
        .RE
        .PP
\fIArchitecture=\fR
.RS 4

          
          
            Checks whether the system is running on a specific architecture\&. See
ConditionArchitecture=
in
\fBsystemd.unit\fR(5)
for details\&.

          
        .RE
      

  

  .SH "[LINK] SECTION OPTIONS"

    

    .PP
The
[Link]
section accepts the following keys:


    

      .PP
\fIMACAddress=\fR
.RS 4

        
        
          The hardware address to set for the device\&.

        
      .RE
      .PP
\fIMTUBytes=\fR
.RS 4

        
        
          The maximum transmission unit in bytes to set for the device\&. The usual suffixes K, M, G, are supported and are understood to the base of 1024\&.
.sp

          Note that if IPv6 is enabled on the interface, and the MTU is chosen below 1280 (the minimum MTU for IPv6) it will automatically be increased to this value\&.

        
      .RE
      .PP
\fIARP=\fR
.RS 4

        
        
          A boolean\&. Enables or disables the ARP (low\-level Address Resolution Protocol) for this interface\&. Defaults to unset, which means that the kernel default will be used\&.
.sp

          For example, disabling ARP is useful when creating multiple MACVLAN or VLAN virtual interfaces atop a single lower\-level physical interface, which will then only serve as a link/"bridge" device aggregating traffic to the same physical link and not participate in the network otherwise\&.

        
      .RE
      .PP
\fIMulticast=\fR
.RS 4

        
        
          A boolean\&. Enables or disables the multicast flag on the device\&.

        
      .RE
      .PP
\fIAllMulticast=\fR
.RS 4

        
        
          A boolean\&. When this flag is set the driver retrieves all multicast packets from the network\&. This happens when multicast routing is enabled\&.

        
      .RE
      .PP
\fIUnmanaged=\fR
.RS 4

        
        
          A boolean\&. When
yes, no attempts are made to bring up or configure matching links, equivalent to when there are no matching network files\&. Defaults to
no\&.
.sp

          This is useful for preventing later matching network files from interfering with certain interfaces that are fully controlled by other applications\&.

        
      .RE
      .PP
\fIRequiredForOnline=\fR
.RS 4

        
        
          A boolean\&. When
yes, the network is deemed required when determining whether the system is online when running
systemd\-networkd\-wait\-online\&. When
no, the network is ignored when checking for online state\&. Defaults to
yes\&.
.sp

          The network will be brought up normally in all cases, but in the event that there is no address being assigned by DHCP or the cable is not plugged in, the link will simply remain offline and be skipped automatically by
systemd\-networkd\-wait\-online
if
RequiredForOnline=true\&.

        
      .RE
    
  

  .SH "[NETWORK] SECTION OPTIONS"

    

      .PP
The
[Network]
section accepts the following keys:


      

        .PP
\fIDescription=\fR
.RS 4

          
          
            A description of the device\&. This is only used for presentation purposes\&.

          
        .RE
        .PP
\fIDHCP=\fR
.RS 4

          
          
            Enables DHCPv4 and/or DHCPv6 client support\&. Accepts
yes,
no,
ipv4, or
ipv6\&. Defaults to
no\&.
.sp


            Note that DHCPv6 will by default be triggered by Router Advertisement, if that is enabled, regardless of this parameter\&. By enabling DHCPv6 support explicitly, the DHCPv6 client will be started regardless of the presence of routers on the link, or what flags the routers pass\&. See
IPv6AcceptRA=\&.
.sp


            Furthermore, note that by default the domain name specified through DHCP is not used for name resolution\&. See option
\fBUseDomains=\fR
below\&.
.sp


            See the
[DHCP]
section below for further configuration options for the DHCP client support\&.

          
        .RE
        .PP
\fIDHCPServer=\fR
.RS 4

          
          
            A boolean\&. Enables DHCPv4 server support\&. Defaults to
no\&. Further settings for the DHCP server may be set in the
[DHCPServer]
section described below\&.

          
        .RE
        .PP
\fILinkLocalAddressing=\fR
.RS 4

          
          
            Enables link\-local address autoconfiguration\&. Accepts
yes,
no,
ipv4, or
ipv6\&. Defaults to
ipv6\&.

          
        .RE
        .PP
\fIIPv4LLRoute=\fR
.RS 4

          
          
            A boolean\&. When true, sets up the route needed for non\-IPv4LL hosts to communicate with IPv4LL\-only hosts\&. Defaults to false\&.

          
        .RE
        .PP
\fIIPv6Token=\fR
.RS 4

          
          
            An IPv6 address with the top 64 bits unset\&. When set, indicates the 64\-bit interface part of SLAAC IPv6 addresses for this link\&. Note that the token is only ever used for SLAAC, and not for DHCPv6 addresses, even in the case DHCP is requested by router advertisement\&. By default, the token is autogenerated\&.

          
        .RE
        .PP
\fILLMNR=\fR
.RS 4

          
          
            A boolean or
resolve\&. When true, enables
\m[blue]\fBLink\-Local Multicast Name Resolution\fR\m[]\&\s-2\u[1]\d\s+2
on the link\&. When set to
resolve, only resolution is enabled, but not host registration and announcement\&. Defaults to true\&. This setting is read by
\fBsystemd-resolved.service\fR(8)\&.

          
        .RE
        .PP
\fIMulticastDNS=\fR
.RS 4

          
          
            A boolean or
resolve\&. When true, enables
\m[blue]\fBMulticast DNS\fR\m[]\&\s-2\u[2]\d\s+2
support on the link\&. When set to
resolve, only resolution is enabled, but not host or service registration and announcement\&. Defaults to false\&. This setting is read by
\fBsystemd-resolved.service\fR(8)\&.

          
        .RE
        .PP
\fIDNSOverTLS=\fR
.RS 4

          
          
            Takes false or
opportunistic\&. When set to
opportunistic, enables
\m[blue]\fBDNS\-over\-TLS\fR\m[]\&\s-2\u[3]\d\s+2
support on the link\&. This option defines a per\-interface setting for
\fBresolved.conf\fR(5)\*(Aqs global
\fIDNSOverTLS=\fR
option\&. Defaults to false\&. This setting is read by
\fBsystemd-resolved.service\fR(8)\&.

          
        .RE
        .PP
\fIDNSSEC=\fR
.RS 4

          
          
            A boolean or
allow\-downgrade\&. When true, enables
\m[blue]\fBDNSSEC\fR\m[]\&\s-2\u[4]\d\s+2
DNS validation support on the link\&. When set to
allow\-downgrade, compatibility with non\-DNSSEC capable networks is increased, by automatically turning off DNSSEC in this case\&. This option defines a per\-interface setting for
\fBresolved.conf\fR(5)\*(Aqs global
\fIDNSSEC=\fR
option\&. Defaults to false\&. This setting is read by
\fBsystemd-resolved.service\fR(8)\&.

          
        .RE
        .PP
\fIDNSSECNegativeTrustAnchors=\fR
.RS 4

          
          A space\-separated list of DNSSEC negative trust anchor domains\&. If specified and DNSSEC is enabled, look\-ups done via the interface\*(Aqs DNS server will be subject to the list of negative trust anchors, and not require authentication for the specified domains, or anything below it\&. Use this to disable DNSSEC authentication for specific private domains, that cannot be proven valid using the Internet DNS hierarchy\&. Defaults to the empty list\&. This setting is read by
\fBsystemd-resolved.service\fR(8)\&.

          
        .RE
        .PP
\fILLDP=\fR
.RS 4

          
          
            Controls support for Ethernet LLDP packet reception\&. LLDP is a link\-layer protocol commonly implemented on professional routers and bridges which announces which physical port a system is connected to, as well as other related data\&. Accepts a boolean or the special value
routers\-only\&. When true, incoming LLDP packets are accepted and a database of all LLDP neighbors maintained\&. If
routers\-only
is set only LLDP data of various types of routers is collected and LLDP data about other types of devices ignored (such as stations, telephones and others)\&. If false, LLDP reception is disabled\&. Defaults to
routers\-only\&. Use
\fBnetworkctl\fR(1)
to query the collected neighbor data\&. LLDP is only available on Ethernet links\&. See
\fIEmitLLDP=\fR
below for enabling LLDP packet emission from the local system\&.

          
        .RE
        .PP
\fIEmitLLDP=\fR
.RS 4

          
          
            Controls support for Ethernet LLDP packet emission\&. Accepts a boolean parameter or the special values
nearest\-bridge,
non\-tpmr\-bridge
and
customer\-bridge\&. Defaults to false, which turns off LLDP packet emission\&. If not false, a short LLDP packet with information about the local system is sent out in regular intervals on the link\&. The LLDP packet will contain information about the local host name, the local machine ID (as stored in
\fBmachine-id\fR(5)) and the local interface name, as well as the pretty hostname of the system (as set in
\fBmachine-info\fR(5))\&. LLDP emission is only available on Ethernet links\&. Note that this setting passes data suitable for identification of host to the network and should thus not be enabled on untrusted networks, where such identification data should not be made available\&. Use this option to permit other systems to identify on which interfaces they are connected to this system\&. The three special values control propagation of the LLDP packets\&. The
nearest\-bridge
setting permits propagation only to the nearest connected bridge,
non\-tpmr\-bridge
permits propagation across Two\-Port MAC Relays, but not any other bridges, and
customer\-bridge
permits propagation until a customer bridge is reached\&. For details about these concepts, see
\m[blue]\fBIEEE 802\&.1AB\-2016\fR\m[]\&\s-2\u[5]\d\s+2\&. Note that configuring this setting to true is equivalent to
nearest\-bridge, the recommended and most restricted level of propagation\&. See
\fILLDP=\fR
above for an option to enable LLDP reception\&.

          
        .RE
        .PP
\fIBindCarrier=\fR
.RS 4

          
          
            A link name or a list of link names\&. When set, controls the behavior of the current link\&. When all links in the list are in an operational down state, the current link is brought down\&. When at least one link has carrier, the current interface is brought up\&.

          
        .RE
        .PP
\fIAddress=\fR
.RS 4

          
          
            A static IPv4 or IPv6 address and its prefix length, separated by a
/
character\&. Specify this key more than once to configure several addresses\&. The format of the address must be as described in
\fBinet_pton\fR(3)\&. This is a short\-hand for an [Address] section only containing an Address key (see below)\&. This option may be specified more than once\&.
.sp


            If the specified address is 0\&.0\&.0\&.0 (for IPv4) or [::] (for IPv6), a new address range of the requested size is automatically allocated from a system\-wide pool of unused ranges\&. The allocated range is checked against all current network interfaces and all known network configuration files to avoid address range conflicts\&. The default system\-wide pool consists of 192\&.168\&.0\&.0/16, 172\&.16\&.0\&.0/12 and 10\&.0\&.0\&.0/8 for IPv4, and fc00::/7 for IPv6\&. This functionality is useful to manage a large number of dynamically created network interfaces with the same network configuration and automatic address range assignment\&.


          
        .RE
        .PP
\fIGateway=\fR
.RS 4

          
          
            The gateway address, which must be in the format described in
\fBinet_pton\fR(3)\&. This is a short\-hand for a [Route] section only containing a Gateway key\&. This option may be specified more than once\&.

          
        .RE
        .PP
\fIDNS=\fR
.RS 4

          
          
            A DNS server address, which must be in the format described in
\fBinet_pton\fR(3)\&. This option may be specified more than once\&. This setting is read by
\fBsystemd-resolved.service\fR(8)\&.

          
        .RE
        .PP
\fIDomains=\fR
.RS 4

          
          
            A list of domains which should be resolved using the DNS servers on this link\&. Each item in the list should be a domain name, optionally prefixed with a tilde (~)\&. The domains with the prefix are called "routing\-only domains"\&. The domains without the prefix are called "search domains" and are first used as search suffixes for extending single\-label host names (host names containing no dots) to become fully qualified domain names (FQDNs)\&. If a single\-label host name is resolved on this interface, each of the specified search domains are appended to it in turn, converting it into a fully qualified domain name, until one of them may be successfully resolved\&.
.sp


            Both "search" and "routing\-only" domains are used for routing of DNS queries: look\-ups for host names ending in those domains (hence also single label names, if any "search domains" are listed), are routed to the DNS servers configured for this interface\&. The domain routing logic is particularly useful on multi\-homed hosts with DNS servers serving particular private DNS zones on each interface\&.
.sp


            The "routing\-only" domain
~\&.
(the tilde indicating definition of a routing domain, the dot referring to the DNS root domain which is the implied suffix of all valid DNS names) has special effect\&. It causes all DNS traffic which does not match another configured domain routing entry to be routed to DNS servers specified for this interface\&. This setting is useful to prefer a certain set of DNS servers if a link on which they are connected is available\&.
.sp


            This setting is read by
\fBsystemd-resolved.service\fR(8)\&. "Search domains" correspond to the
\fIdomain\fR
and
\fIsearch\fR
entries in
\fBresolv.conf\fR(5)\&. Domain name routing has no equivalent in the traditional glibc API, which has no concept of domain name servers limited to a specific link\&.

          
        .RE
        .PP
\fINTP=\fR
.RS 4

          
          
            An NTP server address\&. This option may be specified more than once\&. This setting is read by
\fBsystemd-timesyncd.service\fR(8)\&.

          
        .RE
        .PP
\fIIPForward=\fR
.RS 4

          
          Configures IP packet forwarding for the system\&. If enabled, incoming packets on any network interface will be forwarded to any other interfaces according to the routing table\&. Takes either a boolean argument, or the values
ipv4
or
ipv6, which only enable IP packet forwarding for the specified address family\&. This controls the
net\&.ipv4\&.ip_forward
and
net\&.ipv6\&.conf\&.all\&.forwarding
sysctl options of the network interface (see
\m[blue]\fBip\-sysctl\&.txt\fR\m[]\&\s-2\u[6]\d\s+2
for details about sysctl options)\&. Defaults to
no\&.
.sp


          Note: this setting controls a global kernel option, and does so one way only: if a network that has this setting enabled is set up the global setting is turned on\&. However, it is never turned off again, even after all networks with this setting enabled are shut down again\&.
.sp


          To allow IP packet forwarding only between specific network interfaces use a firewall\&.

          
        .RE
        .PP
\fIIPMasquerade=\fR
.RS 4

          
          Configures IP masquerading for the network interface\&. If enabled, packets forwarded from the network interface will be appear as coming from the local host\&. Takes a boolean argument\&. Implies
\fIIPForward=ipv4\fR\&. Defaults to
no\&.

        .RE
        .PP
\fIIPv6PrivacyExtensions=\fR
.RS 4

          
          Configures use of stateless temporary addresses that change over time (see
\m[blue]\fBRFC 4941\fR\m[]\&\s-2\u[7]\d\s+2, Privacy Extensions for Stateless Address Autoconfiguration in IPv6)\&. Takes a boolean or the special values
prefer\-public
and
kernel\&. When true, enables the privacy extensions and prefers temporary addresses over public addresses\&. When
prefer\-public, enables the privacy extensions, but prefers public addresses over temporary addresses\&. When false, the privacy extensions remain disabled\&. When
kernel, the kernel\*(Aqs default setting will be left in place\&. Defaults to
no\&.

        .RE
        .PP
\fIIPv6AcceptRA=\fR
.RS 4

          
          Enable or disable IPv6 Router Advertisement (RA) reception support for the interface\&. Takes a boolean parameter\&. If true, RAs are accepted; if false, RAs are ignored, independently of the local forwarding state\&. When not set, the kernel default is used, and RAs are accepted only when local forwarding is disabled for that interface\&. When RAs are accepted, they may trigger the start of the DHCPv6 client if the relevant flags are set in the RA data, or if no routers are found on the link\&.
.sp


          Further settings for the IPv6 RA support may be configured in the
[IPv6AcceptRA]
section, see below\&.
.sp


          Also see
\m[blue]\fBip\-sysctl\&.txt\fR\m[]\&\s-2\u[6]\d\s+2
in the kernel documentation regarding
accept_ra, but note that systemd\*(Aqs setting of
\fB1\fR
(i\&.e\&. true) corresponds to kernel\*(Aqs setting of
\fB2\fR\&.

        
        .RE
        .PP
\fIIPv6DuplicateAddressDetection=\fR
.RS 4

          
          Configures the amount of IPv6 Duplicate Address Detection (DAD) probes to send\&. Defaults to unset\&.

        .RE
        .PP
\fIIPv6HopLimit=\fR
.RS 4

          
          Configures IPv6 Hop Limit\&. For each router that forwards the packet, the hop limit is decremented by 1\&. When the hop limit field reaches zero, the packet is discarded\&. Defaults to unset\&.

        .RE
        .PP
\fIIPv4ProxyARP=\fR
.RS 4

          
          A boolean\&. Configures proxy ARP for IPv4\&. Proxy ARP is the technique in which one host, usually a router, answers ARP requests intended for another machine\&. By "faking" its identity, the router accepts responsibility for routing packets to the "real" destination\&. (see
\m[blue]\fBRFC 1027\fR\m[]\&\s-2\u[8]\d\s+2\&. Defaults to unset\&.

        .RE
        .PP
\fIIPv6ProxyNDP=\fR
.RS 4

          
          A boolean\&. Configures proxy NDP for IPv6\&. Proxy NDP (Neighbor Discovery Protocol) is a technique for IPv6 to allow routing of addresses to a different destination when peers expect them to be present on a certain physical link\&. In this case a router answers Neighbour Advertisement messages intended for another machine by offering its own MAC address as destination\&. Unlike proxy ARP for IPv4, it is not enabled globally, but will only send Neighbour Advertisement messages for addresses in the IPv6 neighbor proxy table, which can also be shown by
\fBip \-6 neighbour show proxy\fR\&. systemd\-networkd will control the per\-interface `proxy_ndp` switch for each configured interface depending on this option\&. Defautls to unset\&.

        .RE
        .PP
\fIIPv6ProxyNDPAddress=\fR
.RS 4

          
          An IPv6 address, for which Neighbour Advertisement messages will be proxied\&. This option may be specified more than once\&. systemd\-networkd will add the
\fBIPv6ProxyNDPAddress=\fR
entries to the kernel\*(Aqs IPv6 neighbor proxy table\&. This option implies
\fBIPv6ProxyNDP=true\fR
but has no effect if
\fBIPv6ProxyNDP\fR
has been set to false\&. Defaults to unset\&.

        .RE
        .PP
\fIIPv6PrefixDelegation=\fR
.RS 4

          
          Whether to enable or disable Router Advertisement sending on a link\&. Allowed values are
static
which distributes prefixes as defined in the
[IPv6PrefixDelegation]
and any
[IPv6Prefix]
sections,
dhcpv6
which requests prefixes using a DHCPv6 client configured for another link and any values configured in the
[IPv6PrefixDelegation]
section while ignoring all static prefix configuration sections,
yes
which uses both static configuration and DHCPv6, and
false
which turns off IPv6 prefix delegation altogether\&. Defaults to
false\&. See the
[IPv6PrefixDelegation]
and the
[IPv6Prefix]
sections for more configuration options\&.

        .RE
        .PP
\fIIPv6MTUBytes=\fR
.RS 4

          
          Configures IPv6 maximum transmission unit (MTU)\&. An integer greater than or equal to 1280 bytes\&. Defaults to unset\&.

        .RE
        .PP
\fIBridge=\fR
.RS 4

          
          
            The name of the bridge to add the link to\&. See
\fBsystemd.netdev\fR(5)\&.

          
        .RE
        .PP
\fIBond=\fR
.RS 4

          
          
            The name of the bond to add the link to\&. See
\fBsystemd.netdev\fR(5)\&.

          
        .RE
        .PP
\fIVRF=\fR
.RS 4

          
          
            The name of the VRF to add the link to\&. See
\fBsystemd.netdev\fR(5)\&.

          
        .RE
        .PP
\fIVLAN=\fR
.RS 4

          
          
            The name of a VLAN to create on the link\&. See
\fBsystemd.netdev\fR(5)\&. This option may be specified more than once\&.

          
        .RE
        .PP
\fIMACVLAN=\fR
.RS 4

          
          
            The name of a MACVLAN to create on the link\&. See
\fBsystemd.netdev\fR(5)\&. This option may be specified more than once\&.

          
        .RE
        .PP
\fIVXLAN=\fR
.RS 4

          
          
            The name of a VXLAN to create on the link\&. See
\fBsystemd.netdev\fR(5)\&. This option may be specified more than once\&.

          
        .RE
        .PP
\fITunnel=\fR
.RS 4

          
          
            The name of a Tunnel to create on the link\&. See
\fBsystemd.netdev\fR(5)\&. This option may be specified more than once\&.

          
        .RE
      .PP
\fIActiveSlave=\fR
.RS 4

        
        
          A boolean\&. Specifies the new active slave\&. The
ActiveSlave=
option is only valid for following modes:
active\-backup,
balance\-alb
and
balance\-tlb\&. Defaults to false\&.

        
      .RE
      .PP
\fIPrimarySlave=\fR
.RS 4

        
        
          A boolean\&. Specifies which slave is the primary device\&. The specified device will always be the active slave while it is available\&. Only when the primary is off\-line will alternate devices be used\&. This is useful when one slave is preferred over another, e\&.g\&. when one slave has higher throughput than another\&. The
PrimarySlave=
option is only valid for following modes:
active\-backup,
balance\-alb
and
balance\-tlb\&. Defaults to false\&.

        
      .RE
      .PP
\fIConfigureWithoutCarrier=\fR
.RS 4

        
        
          A boolean\&. Allows networkd to configure a specific link even if it has no carrier\&. Defaults to false\&.

        
      .RE
      

  

  .SH "[ADDRESS] SECTION OPTIONS"

    

      .PP
An
[Address]
section accepts the following keys\&. Specify several
[Address]
sections to configure several addresses\&.


      

        .PP
\fIAddress=\fR
.RS 4

          
          
            As in the
[Network]
section\&. This key is mandatory\&.

          
        .RE
        .PP
\fIPeer=\fR
.RS 4

          
          
            The peer address in a point\-to\-point connection\&. Accepts the same format as the
Address
key\&.

          
        .RE
        .PP
\fIBroadcast=\fR
.RS 4

          
          
            The broadcast address, which must be in the format described in
\fBinet_pton\fR(3)\&. This key only applies to IPv4 addresses\&. If it is not given, it is derived from the
Address
key\&.

          
        .RE
        .PP
\fILabel=\fR
.RS 4

          
          
            An address label\&.

          
        .RE
        .PP
\fIPreferredLifetime=\fR
.RS 4

          
          
            Allows the default "preferred lifetime" of the address to be overridden\&. Only three settings are accepted:
forever
or
infinity
which is the default and means that the address never expires, and
0
which means that the address is considered immediately "expired" and will not be used, unless explicitly requested\&. A setting of PreferredLifetime=0 is useful for addresses which are added to be used only by a specific application, which is then configured to use them explicitly\&.

          
        .RE
        .PP
\fIScope=\fR
.RS 4

          
          
            The scope of the address, which can be
global,
link
or
host
or an unsigned integer ranges 0 to 255\&. Defaults to
global\&.

          
        .RE
        .PP
\fIHomeAddress=\fR
.RS 4

          
          
            Takes a boolean argument\&. Designates this address the "home address" as defined in
\m[blue]\fBRFC 6275\fR\m[]\&\s-2\u[9]\d\s+2\&. Supported only on IPv6\&. Defaults to false\&.

          
        .RE
        .PP
\fIDuplicateAddressDetection=\fR
.RS 4

          
          
            Takes a boolean argument\&. Do not perform Duplicate Address Detection
\m[blue]\fBRFC 4862\fR\m[]\&\s-2\u[10]\d\s+2
when adding this address\&. Supported only on IPv6\&. Defaults to false\&.

          
        .RE
        .PP
\fIManageTemporaryAddress=\fR
.RS 4

          
          
            Takes a boolean argument\&. If true the kernel manage temporary addresses created from this one as template on behalf of Privacy Extensions
\m[blue]\fBRFC 3041\fR\m[]\&\s-2\u[11]\d\s+2\&. For this to become active, the use_tempaddr sysctl setting has to be set to a value greater than zero\&. The given address needs to have a prefix length of 64\&. This flag allows to use privacy extensions in a manually configured network, just like if stateless auto\-configuration was active\&. Defaults to false\&.

          
        .RE
        .PP
\fIPrefixRoute=\fR
.RS 4

          
          
            Takes a boolean argument\&. When adding or modifying an IPv6 address, the userspace application needs a way to suppress adding a prefix route\&. This is for example relevant together with IFA_F_MANAGERTEMPADDR, where userspace creates autoconf generated addresses, but depending on on\-link, no route for the prefix should be added\&. Defaults to false\&.

          
        .RE
        .PP
\fIAutoJoin=\fR
.RS 4

          
          
            Takes a boolean argument\&. Joining multicast group on ethernet level via
\fBip maddr\fR
command would not work if we have an Ethernet switch that does IGMP snooping since the switch would not replicate multicast packets on ports that did not have IGMP reports for the multicast addresses\&. Linux vxlan interfaces created via
\fBip link add vxlan\fR
or networkd\*(Aqs netdev kind vxlan have the group option that enables then to do the required join\&. By extending ip address command with option
autojoin
we can get similar functionality for openvswitch (OVS) vxlan interfaces as well as other tunneling mechanisms that need to receive multicast traffic\&. Defaults to
no\&.

          
        .RE
      
  

    .SH "[IPV6ADDRESSLABEL] SECTION OPTIONS"

    

      .PP
An
[IPv6AddressLabel]
section accepts the following keys\&. Specify several
[IPv6AddressLabel]
sections to configure several address labels\&. IPv6 address labels are used for address selection\&. See
\m[blue]\fBRFC 3484\fR\m[]\&\s-2\u[12]\d\s+2\&. Precedence is managed by userspace, and only the label itself is stored in the kernel


      

        .PP
\fILabel=\fR
.RS 4

          
          
            The label for the prefix (an unsigned integer) ranges 0 to 4294967294\&. 0xffffffff is reserved\&. This key is mandatory\&.

          
        .RE
        .PP
\fIPrefix=\fR
.RS 4

          
          
            IPv6 prefix is an address with a prefix length, separated by a slash
/
character\&. This key is mandatory\&.

          
        .RE
      
  

 .SH "[ROUTINGPOLICYRULE] SECTION OPTIONS"

    

      .PP
An
[RoutingPolicyRule]
section accepts the following keys\&. Specify several
[RoutingPolicyRule]
sections to configure several rules\&.


      

        .PP
\fITypeOfService=\fR
.RS 4

          
          
            Specifies the type of service to match a number between 0 to 255\&.

          
        .RE
        .PP
\fIFrom=\fR
.RS 4

          
          
            Specifies the source address prefix to match\&. Possibly followed by a slash and the prefix length\&.

          
        .RE
        .PP
\fITo=\fR
.RS 4

          
          
            Specifies the destination address prefix to match\&. Possibly followed by a slash and the prefix length\&.

          
        .RE
        .PP
\fIFirewallMark=\fR
.RS 4

          
          
            Specifies the iptables firewall mark value to match (a number between 1 and 4294967295)\&.

          
        .RE
        .PP
\fITable=\fR
.RS 4

          
          
            Specifies the routing table identifier to lookup if the rule selector matches\&. The table identifier for a route (a number between 1 and 4294967295)\&.

          
        .RE
        .PP
\fIPriority=\fR
.RS 4

          
          
            Specifies the priority of this rule\&.
\fIPriority=\fR
is an unsigned integer\&. Higher number means lower priority, and rules get processed in order of increasing number\&.

          
        .RE
        .PP
\fIIncomingInterface=\fR
.RS 4

          
          
            Specifies incoming device to match\&. If the interface is loopback, the rule only matches packets originating from this host\&.

          
        .RE
        .PP
\fIOutgoingInterface=\fR
.RS 4

          
          
            Specifies the outgoing device to match\&. The outgoing interface is only available for packets originating from local sockets that are bound to a device\&.

          
        .RE
      
  

  .SH "[ROUTE] SECTION OPTIONS"

    
      .PP
The
[Route]
section accepts the following keys\&. Specify several
[Route]
sections to configure several routes\&.


      

        .PP
\fIGateway=\fR
.RS 4

          
          
            As in the
[Network]
section\&.

          
        .RE
         .PP
\fIGatewayOnlink=\fR
.RS 4

           
           
             The
GatewayOnlink
option tells the kernel that it does not have to check if the gateway is reachable directly by the current machine (i\&.e\&., the kernel does not need to check if the gateway is attached to the local network), so that we can insert the route in the kernel table without it being complained about\&. A boolean, defaults to
no\&.

           
         .RE
        .PP
\fIDestination=\fR
.RS 4

          
          
            The destination prefix of the route\&. Possibly followed by a slash and the prefix length\&. If omitted, a full\-length host route is assumed\&.

          
        .RE
        .PP
\fISource=\fR
.RS 4

          
          
            The source prefix of the route\&. Possibly followed by a slash and the prefix length\&. If omitted, a full\-length host route is assumed\&.

          
        .RE
        .PP
\fIMetric=\fR
.RS 4

          
          
            The metric of the route (an unsigned integer)\&.

          
        .RE
        .PP
\fIIPv6Preference=\fR
.RS 4

          
          
            Specifies the route preference as defined in
\m[blue]\fBRFC4191\fR\m[]\&\s-2\u[13]\d\s+2
for Router Discovery messages\&. Which can be one of
low
the route has a lowest priority,
medium
the route has a default priority or
high
the route has a highest priority\&.

          
        .RE
        .PP
\fIScope=\fR
.RS 4

          
          
            The scope of the route, which can be
global,
link
or
host\&. Defaults to
global\&.

          
        .RE
        .PP
\fIPreferredSource=\fR
.RS 4

          
          
            The preferred source address of the route\&. The address must be in the format described in
\fBinet_pton\fR(3)\&.

          
        .RE
        .PP
\fITable=\fR\fI\fInum\fR\fR
.RS 4

          
          
          The table identifier for the route (a number between 1 and 4294967295, or 0 to unset)\&. The table can be retrieved using
\fBip route show table \fR\fB\fInum\fR\fR\&.

          
        .RE
        .PP
\fIProtocol=\fR
.RS 4

          
          
            The Protocol identifier for the route\&. Takes a number between 0 and 255 or the special values
kernel,
boot
and
static\&. Defaults to
static\&.

          
        .RE
        .PP
\fIType=\fR
.RS 4

          
          
            The Type identifier for special route types, which can be
unicast
route to a destination network address which describes the path to the destination,
blackhole
packets are discarded silently,
unreachable
packets are discarded and the ICMP message host unreachable is generated,
prohibit
packets are discarded and the ICMP message communication administratively prohibited is generated\&. Defaults to
unicast\&.

          
        .RE
        .PP
\fIInitialCongestionWindow=\fR
.RS 4

          
          
            The TCP initial congestion window is used during the start of a TCP connection\&. During the start of a TCP session, when a client requests a resource, the server\*(Aqs initial congestion window determines how many data bytes will be sent during the initial burst of data\&. Takes a size in bytes between 1 and 4294967295 (2^32 \- 1)\&. The usual suffixes K, M, G are supported and are understood to the base of 1024\&. Defaults to unset\&.

          
        .RE
        .PP
\fIInitialAdvertisedReceiveWindow=\fR
.RS 4

          
          
            The TCP initial advertised receive window is the amount of receive data (in bytes) that can initally be buffered at one time on a connection\&. The sending host can send only that amount of data before waiting for an acknowledgment and window update from the receiving host\&. Takes a size in bytes between 1 and 4294967295 (2^32 \- 1)\&. The usual suffixes K, M, G are supported and are understood to the base of 1024\&. Defaults to unset\&.

          
        .RE
        .PP
\fIQuickAck=\fR
.RS 4

          
          
            Takes a boolean argument\&. When true enables TCP quick ack mode for the route\&. Defaults to unset\&.

          
        .RE
        .PP
\fIMTUBytes=\fR
.RS 4

        
        
          The maximum transmission unit in bytes to set for the route\&. The usual suffixes K, M, G, are supported and are understood to the base of 1024\&.
.sp

          Note that if IPv6 is enabled on the interface, and the MTU is chosen below 1280 (the minimum MTU for IPv6) it will automatically be increased to this value\&.

        
      .RE
      
  

  .SH "[DHCP] SECTION OPTIONS"

    
      .PP
The
[DHCP]
section configures the DHCPv4 and DHCP6 client, if it is enabled with the
\fIDHCP=\fR
setting described above:


      

        .PP
\fIUseDNS=\fR
.RS 4

          
          
            When true (the default), the DNS servers received from the DHCP server will be used and take precedence over any statically configured ones\&.
.sp


            This corresponds to the
\fBnameserver\fR
option in
\fBresolv.conf\fR(5)\&.

          
        .RE
        .PP
\fIUseNTP=\fR
.RS 4

          
          
            When true (the default), the NTP servers received from the DHCP server will be used by systemd\-timesyncd and take precedence over any statically configured ones\&.

          
        .RE
        .PP
\fIUseMTU=\fR
.RS 4

          
          
            When true, the interface maximum transmission unit from the DHCP server will be used on the current link\&. Defaults to false\&.

          
        .RE
        .PP
\fIAnonymize=\fR
.RS 4

          
          
            Takes a boolean argument\&. When true, the options sent to the DHCP server will follow the
\m[blue]\fBRFC 7844\fR\m[]\&\s-2\u[14]\d\s+2
(Anonymity Profiles for DHCP Clients) to minimize disclosure of identifying information\&. Defaults to false\&.
.sp


            This option should only be set to true when
\fIMACAddressPolicy=\fR
is set to
random
(see
\fBsystemd.link\fR(5))\&.
.sp


            Note that this configuration will overwrite others\&. In concrete, the following variables will be ignored:
\fISendHostname=\fR,
\fIClientIdentifier=\fR,
\fIUseRoutes=\fR,
\fISendHostname=\fR,
\fIUseMTU=\fR,
\fIVendorClassIdentifier=\fR,
\fIUseTimezone=\fR\&.

          
        .RE
        .PP
\fISendHostname=\fR
.RS 4

          
          
            When true (the default), the machine\*(Aqs hostname will be sent to the DHCP server\&.

          
        .RE
        .PP
\fIUseHostname=\fR
.RS 4

          
          
            When true (the default), the hostname received from the DHCP server will be set as the transient hostname of the system

          
        .RE
        .PP
\fIHostname=\fR
.RS 4

        
        
          Use this value for the hostname which is sent to the DHCP server, instead of machine\*(Aqs hostname\&.

        
      .RE
        .PP
\fIUseDomains=\fR
.RS 4

          
          
            Takes a boolean argument, or the special value
route\&. When true, the domain name received from the DHCP server will be used as DNS search domain over this link, similar to the effect of the
\fBDomains=\fR
setting\&. If set to
route, the domain name received from the DHCP server will be used for routing DNS queries only, but not for searching, similar to the effect of the
\fBDomains=\fR
setting when the argument is prefixed with
~\&. Defaults to false\&.
.sp


            It is recommended to enable this option only on trusted networks, as setting this affects resolution of all host names, in particular of single\-label names\&. It is generally safer to use the supplied domain only as routing domain, rather than as search domain, in order to not have it affect local resolution of single\-label names\&.
.sp


            When set to true, this setting corresponds to the
\fBdomain\fR
option in
\fBresolv.conf\fR(5)\&.

          
        .RE
        .PP
\fIUseRoutes=\fR
.RS 4

          
          
            When true (the default), the static routes will be requested from the DHCP server and added to the routing table with a metric of 1024, and a scope of "global", "link" or "host", depending on the route\*(Aqs destination and gateway\&. If the destination is on the local host, e\&.g\&., 127\&.x\&.x\&.x, or the same as the link\*(Aqs own address, the scope will be set to "host"\&. Otherwise if the gateway is null (a direct route), a "link" scope will be used\&. For anything else, scope defaults to "global"\&.

          
        .RE

        .PP
\fIUseTimezone=\fR
.RS 4

          

          When true, the timezone received from the DHCP server will be set as timezone of the local system\&. Defaults to
no\&.

        .RE

        .PP
\fICriticalConnection=\fR
.RS 4

          
          
            When true, the connection will never be torn down even if the DHCP lease expires\&. This is contrary to the DHCP specification, but may be the best choice if, say, the root filesystem relies on this connection\&. Defaults to false\&.

          
        .RE

        .PP
\fIClientIdentifier=\fR
.RS 4

          
          
            The DHCPv4 client identifier to use\&. Takes one of
mac,
duid
or
duid\-only\&. If set to
mac, the MAC address of the link is used\&. If set to
duid, an RFC4361\-compliant Client ID, which is the combination of IAID and DUID (see below), is used\&. If set to
duid\-only, only DUID is used, this may not be RFC compliant, but some setups may require to use this\&. Defaults to
duid\&.

          
        .RE

        .PP
\fIVendorClassIdentifier=\fR
.RS 4

          
          
            The vendor class identifier used to identify vendor type and configuration\&.

          
        .RE

        .PP
\fIUserClass=\fR
.RS 4

          
          
            A DHCPv4 client can use UserClass option to identify the type or category of user or applications it represents\&. The information contained in this option is a string that represents the user class of which the client is a member\&. Each class sets an identifying string of information to be used by the DHCP service to classify clients\&. Takes a whitespace\-separated list of strings\&.

          
        .RE

        .PP
\fIDUIDType=\fR
.RS 4

          
          
            Override the global
\fIDUIDType\fR
setting for this network\&. See
\fBnetworkd.conf\fR(5)
for a description of possible values\&.

          
        .RE

        .PP
\fIDUIDRawData=\fR
.RS 4

          
          
            Override the global
\fIDUIDRawData\fR
setting for this network\&. See
\fBnetworkd.conf\fR(5)
for a description of possible values\&.

          
        .RE

        .PP
\fIIAID=\fR
.RS 4

          
          
            The DHCP Identity Association Identifier (IAID) for the interface, a 32\-bit unsigned integer\&.

          
        .RE

        .PP
\fIRequestBroadcast=\fR
.RS 4

          
          
            Request the server to use broadcast messages before the IP address has been configured\&. This is necessary for devices that cannot receive RAW packets, or that cannot receive packets at all before an IP address has been configured\&. On the other hand, this must not be enabled on networks where broadcasts are filtered out\&.

          
        .RE

        .PP
\fIRouteMetric=\fR
.RS 4

          
          
            Set the routing metric for routes specified by the DHCP server\&.

          
        .RE

        .PP
\fIRouteTable=\fR\fI\fInum\fR\fR
.RS 4

          
          
            The table identifier for DHCP routes (a number between 1 and 4294967295, or 0 to unset)\&. The table can be retrieved using
\fBip route show table \fR\fB\fInum\fR\fR\&.
.sp

            When used in combination with
\fIVRF=\fR
the VRF\*(Aqs routing table is used unless this parameter is specified\&.

          
        .RE

        .PP
\fIListenPort=\fR
.RS 4

          
          
            Allow setting custom port for the DHCP client to listen on\&.

          
        .RE

        .PP
\fIRapidCommit=\fR
.RS 4

          
          
            A boolean\&. The DHCPv6 client can obtain configuration parameters from a DHCPv6 server through a rapid two\-message exchange (solicit and reply)\&. When the rapid commit option is enabled by both the DHCPv6 client and the DHCPv6 server, the two\-message exchange is used, rather than the default four\-method exchange (solicit, advertise, request, and reply)\&. The two\-message exchange provides faster client configuration and is beneficial in environments in which networks are under a heavy load\&. See
\m[blue]\fBRFC 3315\fR\m[]\&\s-2\u[15]\d\s+2
for details\&. Defaults to true\&.

          
        .RE

      
    

  .SH "[IPV6ACCEPTRA] SECTION OPTIONS"

    
      .PP
The
[IPv6AcceptRA]
section configures the IPv6 Router Advertisement (RA) client, if it is enabled with the
\fIIPv6AcceptRA=\fR
setting described above:


      

        .PP
\fIUseDNS=\fR
.RS 4

          
          
            When true (the default), the DNS servers received in the Router Advertisement will be used and take precedence over any statically configured ones\&.
.sp


            This corresponds to the
\fBnameserver\fR
option in
\fBresolv.conf\fR(5)\&.

          
        .RE

        .PP
\fIUseDomains=\fR
.RS 4

          
          
            Takes a boolean argument, or the special value
route\&. When true, the domain name received via IPv6 Router Advertisement (RA) will be used as DNS search domain over this link, similar to the effect of the
\fBDomains=\fR
setting\&. If set to
route, the domain name received via IPv6 RA will be used for routing DNS queries only, but not for searching, similar to the effect of the
\fBDomains=\fR
setting when the argument is prefixed with
~\&. Defaults to false\&.
.sp


            It is recommended to enable this option only on trusted networks, as setting this affects resolution of all host names, in particular of single\-label names\&. It is generally safer to use the supplied domain only as routing domain, rather than as search domain, in order to not have it affect local resolution of single\-label names\&.
.sp


            When set to true, this setting corresponds to the
\fBdomain\fR
option in
\fBresolv.conf\fR(5)\&.

          
        .RE

        .PP
\fIRouteTable=\fR\fI\fInum\fR\fR
.RS 4

          
          
            The table identifier for the routes received in the Router Advertisement (a number between 1 and 4294967295, or 0 to unset)\&. The table can be retrieved using
\fBip route show table \fR\fB\fInum\fR\fR\&.

          
        .RE
      
  

  .SH "[DHCPSERVER] SECTION OPTIONS"

    
    .PP
The
[DHCPServer]
section contains settings for the DHCP server, if enabled via the
\fIDHCPServer=\fR
option described above:


    


      .PP
\fIPoolOffset=\fR, \fIPoolSize=\fR
.RS 4

        
        

        Configures the pool of addresses to hand out\&. The pool is a contiguous sequence of IP addresses in the subnet configured for the server address, which does not include the subnet nor the broadcast address\&.
\fIPoolOffset=\fR
takes the offset of the pool from the start of subnet, or zero to use the default value\&.
\fIPoolSize=\fR
takes the number of IP addresses in the pool or zero to use the default value\&. By default, the pool starts at the first address after the subnet address and takes up the rest of the subnet, excluding the broadcast address\&. If the pool includes the server address (the default), this is reserved and not handed out to clients\&.

      .RE

      .PP
\fIDefaultLeaseTimeSec=\fR, \fIMaxLeaseTimeSec=\fR
.RS 4

        
        

        Control the default and maximum DHCP lease time to pass to clients\&. These settings take time values in seconds or another common time unit, depending on the suffix\&. The default lease time is used for clients that did not ask for a specific lease time\&. If a client asks for a lease time longer than the maximum lease time, it is automatically shortened to the specified time\&. The default lease time defaults to 1h, the maximum lease time to 12h\&. Shorter lease times are beneficial if the configuration data in DHCP leases changes frequently and clients shall learn the new settings with shorter latencies\&. Longer lease times reduce the generated DHCP network traffic\&.

      .RE

      .PP
\fIEmitDNS=\fR, \fIDNS=\fR
.RS 4

        
        

        Configures whether the DHCP leases handed out to clients shall contain DNS server information\&. The
\fIEmitDNS=\fR
setting takes a boolean argument and defaults to
yes\&. The DNS servers to pass to clients may be configured with the
\fIDNS=\fR
option, which takes a list of IPv4 addresses\&. If the
\fIEmitDNS=\fR
option is enabled but no servers configured, the servers are automatically propagated from an "uplink" interface that has appropriate servers set\&. The "uplink" interface is determined by the default route of the system with the highest priority\&. Note that this information is acquired at the time the lease is handed out, and does not take uplink interfaces into account that acquire DNS or NTP server information at a later point\&. DNS server propagation does not take
/etc/resolv\&.conf
into account\&. Also, note that the leases are not refreshed if the uplink network configuration changes\&. To ensure clients regularly acquire the most current uplink DNS server information, it is thus advisable to shorten the DHCP lease time via
\fIMaxLeaseTimeSec=\fR
described above\&.

      .RE

      .PP
\fIEmitNTP=\fR, \fINTP=\fR
.RS 4

        
        

        Similar to the
\fIEmitDNS=\fR
and
\fIDNS=\fR
settings described above, these settings configure whether and what NTP server information shall be emitted as part of the DHCP lease\&. The same syntax, propagation semantics and defaults apply as for
\fIEmitDNS=\fR
and
\fIDNS=\fR\&.

      .RE

      .PP
\fIEmitRouter=\fR
.RS 4

        

        Similar to the
\fIEmitDNS=\fR
setting described above, this setting configures whether the DHCP lease should contain the router option\&. The same syntax, propagation semantics and defaults apply as for
\fIEmitDNS=\fR\&.

      .RE

      .PP
\fIEmitTimezone=\fR, \fITimezone=\fR
.RS 4

        
        

        Configures whether the DHCP leases handed out to clients shall contain timezone information\&. The
\fIEmitTimezone=\fR
setting takes a boolean argument and defaults to
yes\&. The
\fITimezone=\fR
setting takes a timezone string (such as
Europe/Berlin
or
UTC) to pass to clients\&. If no explicit timezone is set, the system timezone of the local host is propagated, as determined by the
/etc/localtime
symlink\&.

      .RE

    
  

  .SH "[IPV6PREFIXDELEGATION] SECTION OPTIONS"

    
    .PP
The
[IPv6PrefixDelegation]
section contains settings for sending IPv6 Router Advertisements and whether to act as a router, if enabled via the
\fIIPv6PrefixDelegation=\fR
option described above\&. IPv6 network prefixes are defined with one or more
[IPv6Prefix]
sections\&.


    


      .PP
\fIManaged=\fR, \fIOtherInformation=\fR
.RS 4

        
        

        Controls whether a DHCPv6 server is used to acquire IPv6 addresses on the network link when
\fIManaged=\fR
boolean is set to
true
or if only additional network information can be obtained via DHCPv6 for the network link when
\fIOtherInformation=\fR
boolean is set to
true\&. Both settings default to
false, which means that a DHCPv6 server is not being used\&.

      .RE

      .PP
\fIRouterLifetimeSec=\fR
.RS 4

        

        Configures the IPv6 router lifetime in seconds\&. If set, this host also announces itself in Router Advertisements as an IPv6 router for the network link\&. Defaults to unset, which means the host is not acting as a router\&.

        
      .RE

      .PP
\fIRouterPreference=\fR
.RS 4

        

        Configures IPv6 router preference if
\fIRouterLifetimeSec=\fR
is non\-zero\&. Valid values are
high,
medium
and
low, with
normal
and
default
added as synonyms for
medium
just to make configuration easier\&. See
\m[blue]\fBRFC 4191\fR\m[]\&\s-2\u[13]\d\s+2
for details\&. Defaults to
medium\&.

      .RE

      .PP
\fIEmitDNS=\fR, \fIDNS=\fR
.RS 4

        
        

        \fIDNS=\fR
specifies a list of recursive DNS server IPv6 addresses that distributed via Router Advertisement messages when
\fIEmitDNS=\fR
is true\&. If
\fIDNS= \fR
is empty, DNS servers are read from the
[Network]
section\&. If the
[Network]
section does not contain any DNS servers either, DNS servers from the uplink with the highest priority default route are used\&. When
\fIEmitDNS=\fR
is false, no DNS server information is sent in Router Advertisement messages\&.
\fIEmitDNS=\fR
defaults to true\&.

      .RE

      .PP
\fIEmitDomains=\fR, \fIDomains=\fR
.RS 4

        
        

        A list of DNS search domains distributed via Router Advertisement messages when
\fIEmitDomains=\fR
is true\&. If
\fIDomains=\fR
is empty, DNS search domains are read from the
[Network]
section\&. If the
[Network]
section does not contain any DNS search domains either, DNS search domains from the uplink with the highest priority default route are used\&. When
\fIEmitDomains=\fR
is false, no DNS search domain information is sent in Router Advertisement messages\&.
\fIEmitDomains=\fR
defaults to true\&.

      .RE

      .PP
\fIDNSLifetimeSec=\fR
.RS 4

        

        Lifetime in seconds for the DNS server addresses listed in
\fIDNS=\fR
and search domains listed in
\fIDomains=\fR\&.

      .RE

    
    

      .SH "[IPV6PREFIX] SECTION OPTIONS"

    
    .PP
One or more
[IPv6Prefix]
sections contain the IPv6 prefixes that are announced via Router Advertisements\&. See
\m[blue]\fBRFC 4861\fR\m[]\&\s-2\u[16]\d\s+2
for further details\&.


    


      .PP
\fIAddressAutoconfiguration=\fR, \fIOnLink=\fR
.RS 4

        
        

        Boolean values to specify whether IPv6 addresses can be autoconfigured with this prefix and whether the prefix can be used for onlink determination\&. Both settings default to
true
in order to ease configuration\&.

      .RE

      .PP
\fIPrefix=\fR
.RS 4

        

        The IPv6 prefix that is to be distributed to hosts\&. Similarly to configuring static IPv6 addresses, the setting is configured as an IPv6 prefix and its prefix length, separated by a
/
character\&. Use multiple
[IPv6Prefix]
sections to configure multiple IPv6 prefixes since prefix lifetimes, address autoconfiguration and onlink status may differ from one prefix to another\&.

      .RE

      .PP
\fIPreferredLifetimeSec=\fR, \fIValidLifetimeSec=\fR
.RS 4

        
        

        Preferred and valid lifetimes for the prefix measured in seconds\&.
\fIPreferredLifetimeSec=\fR
defaults to 604800 seconds (one week) and
\fIValidLifetimeSec=\fR
defaults to 2592000 seconds (30 days)\&.

      .RE

    
    

    .SH "[BRIDGE] SECTION OPTIONS"

    
      .PP
The
[Bridge]
section accepts the following keys\&.

      

        .PP
\fIUnicastFlood=\fR
.RS 4

          
          
            A boolean\&. Controls whether the bridge should flood traffic for which an FDB entry is missing and the destination is unknown through this port\&. Defaults to unset\&.

          
        .RE
        .PP
\fIHairPin=\fR
.RS 4

          
          
            A boolean\&. Configures whether traffic may be sent back out of the port on which it was received\&. Defaults to unset\&. When this flag is false, and the bridge will not forward traffic back out of the receiving port\&.

          
        .RE
        .PP
\fIUseBPDU=\fR
.RS 4

          
          
            A boolean\&. Configures whether STP Bridge Protocol Data Units will be processed by the bridge port\&. Defaults to unset\&.

          
        .RE
        .PP
\fIFastLeave=\fR
.RS 4

          
          
            A boolean\&. This flag allows the bridge to immediately stop multicast traffic on a port that receives an IGMP Leave message\&. It is only used with IGMP snooping if enabled on the bridge\&. Defaults to unset\&.

          
        .RE
        .PP
\fIAllowPortToBeRoot=\fR
.RS 4

          
          
            A boolean\&. Configures whether a given port is allowed to become a root port\&. Only used when STP is enabled on the bridge\&. Defaults to unset\&.

          
        .RE
        .PP
\fICost=\fR
.RS 4

          
          
            Sets the "cost" of sending packets of this interface\&. Each port in a bridge may have a different speed and the cost is used to decide which link to use\&. Faster interfaces should have lower costs\&. It is an integer value between 1 and 65535\&.

          
        .RE
        .PP
\fIPriority=\fR
.RS 4

          
          
            Sets the "priority" of sending packets on this interface\&. Each port in a bridge may have a different priority which is used to decide which link to use\&. Lower value means higher priority\&. It is an integer value between 0 to 63\&. Networkd does not set any default, meaning the kernel default value of 32 is used\&.

          
        .RE
      
  
  .SH "[BRIDGEFDB] SECTION OPTIONS"

    
      .PP
The
[BridgeFDB]
section manages the forwarding database table of a port and accepts the following keys\&. Specify several
[BridgeFDB]
sections to configure several static MAC table entries\&.


      

        .PP
\fIMACAddress=\fR
.RS 4

          
          
            As in the
[Network]
section\&. This key is mandatory\&.

          
        .RE
        .PP
\fIVLANId=\fR
.RS 4

          
          
            The VLAN ID for the new static MAC table entry\&. If omitted, no VLAN ID information is appended to the new static MAC table entry\&.

          
        .RE
      
  

  .SH "[CAN] SECTION OPTIONS"

    
      .PP
The
[CAN]
section manages the Controller Area Network (CAN bus) and accepts the following keys\&.

      

        .PP
\fIBitRate=\fR
.RS 4

          
          
            The bitrate of CAN device in bits per second\&. The usual SI prefixes (K, M) with the base of 1000 can be used here\&.

          
        .RE
        .PP
\fISamplePoint=\fR
.RS 4

          
          
            Optional sample point in percent with one decimal (e\&.g\&.
75%,
87\&.5%) or permille (e\&.g\&.
875)\&.

          
        .RE
        .PP
\fIRestartSec=\fR
.RS 4

          
          
            Automatic restart delay time\&. If set to a non\-zero value, a restart of the CAN controller will be triggered automatically in case of a bus\-off condition after the specified delay time\&. Subsecond delays can be specified using decimals (e\&.g\&.
0\&.1s) or a
ms
or
us
postfix\&. Using
infinity
or
0
will turn the automatic restart off\&. By default automatic restart is disabled\&.

          
        .RE
      
  

  .SH "[BRIDGEVLAN] SECTION OPTIONS"

    
      .PP
The
[BridgeVLAN]
section manages the VLAN ID configuration of a bridge port and accepts the following keys\&. Specify several
[BridgeVLAN]
sections to configure several VLAN entries\&. The
\fIVLANFiltering=\fR
option has to be enabled, see
[Bridge]
section in
\fBsystemd.netdev\fR(5)\&.


      

        .PP
\fIVLAN=\fR
.RS 4

          
          
            The VLAN ID allowed on the port\&. This can be either a single ID or a range M\-N\&. VLAN IDs are valid from 1 to 4094\&.

          
        .RE
        .PP
\fIEgressUntagged=\fR
.RS 4

          
          
            The VLAN ID specified here will be used to untag frames on egress\&. Configuring
\fIEgressUntagged=\fR
implicates the use of
\fIVLAN=\fR
above and will enable the VLAN ID for ingress as well\&. This can be either a single ID or a range M\-N\&.

          
        .RE
        .PP
\fIPVID=\fR
.RS 4

          
          
            The Port VLAN ID specified here is assigned to all untagged frames at ingress\&.
\fIPVID=\fR
can be used only once\&. Configuring
\fIPVID=\fR
implicates the use of
\fIVLAN=\fR
above and will enable the VLAN ID for ingress as well\&.

          
        .RE
      
  

  .SH "EXAMPLES"

    
    .PP
\fBExample\ \&1.\ \&Static network configuration\fR

      

      
.sp
.if n \{\
.RS 4
.\}
.nf
# /etc/systemd/network/50\-static\&.network
[Match]
Name=enp2s0

[Network]
Address=192\&.168\&.0\&.15/24
Gateway=192\&.168\&.0\&.1
.fi
.if n \{\
.RE
.\}
.sp


      .PP
This brings interface
enp2s0
up with a static address\&. The specified gateway will be used for a default route\&.

    


    .PP
\fBExample\ \&2.\ \&DHCP on ethernet links\fR

      

      
.sp
.if n \{\
.RS 4
.\}
.nf
# /etc/systemd/network/80\-dhcp\&.network
[Match]
Name=en*

[Network]
DHCP=yes
.fi
.if n \{\
.RE
.\}
.sp


      .PP
This will enable DHCPv4 and DHCPv6 on all interfaces with names starting with
en
(i\&.e\&. ethernet interfaces)\&.

    


    .PP
\fBExample\ \&3.\ \&A bridge with two enslaved links\fR

      

      
.sp
.if n \{\
.RS 4
.\}
.nf
# /etc/systemd/network/25\-bridge\-static\&.network
[Match]
Name=bridge0

[Network]
Address=192\&.168\&.0\&.15/24
Gateway=192\&.168\&.0\&.1
DNS=192\&.168\&.0\&.1
.fi
.if n \{\
.RE
.\}
.sp


      
.sp
.if n \{\
.RS 4
.\}
.nf
# /etc/systemd/network/25\-bridge\-slave\-interface\-1\&.network
[Match]
Name=enp2s0

[Network]
Bridge=bridge0
.fi
.if n \{\
.RE
.\}
.sp


      
.sp
.if n \{\
.RS 4
.\}
.nf
# /etc/systemd/network/25\-bridge\-slave\-interface\-2\&.network
[Match]
Name=wlp3s0

[Network]
Bridge=bridge0
.fi
.if n \{\
.RE
.\}
.sp


      .PP
This creates a bridge and attaches devices
enp2s0
and
wlp3s0
to it\&. The bridge will have the specified static address and network assigned, and a default route via the specified gateway will be added\&. The specified DNS server will be added to the global list of DNS resolvers\&.

    


    .PP
\fBExample\ \&4.\ \&\fR

      

      
.sp
.if n \{\
.RS 4
.\}
.nf
# /etc/systemd/network/20\-bridge\-slave\-interface\-vlan\&.network
[Match]
Name=enp2s0

[Network]
Bridge=bridge0

[BridgeVLAN]
VLAN=1\-32
PVID=42
EgressUntagged=42

[BridgeVLAN]
VLAN=100\-200

[BridgeVLAN]
EgressUntagged=300\-400
.fi
.if n \{\
.RE
.\}
.sp


    .PP
This overrides the configuration specified in the previous example for the interface
enp2s0, and enables VLAN on that bridge port\&. VLAN IDs 1\-32, 42, 100\-400 will be allowed\&. Packets tagged with VLAN IDs 42, 300\-400 will be untagged when they leave on this interface\&. Untagged packets which arrive on this interface will be assigned VLAN ID 42\&.

    


    .PP
\fBExample\ \&5.\ \&Various tunnels\fR

      

      
.sp
.if n \{\
.RS 4
.\}
.nf
/etc/systemd/network/25\-tunnels\&.network
[Match]
Name=ens1

[Network]
Tunnel=ipip\-tun
Tunnel=sit\-tun
Tunnel=gre\-tun
Tunnel=vti\-tun
      
.fi
.if n \{\
.RE
.\}
.sp


      
.sp
.if n \{\
.RS 4
.\}
.nf
/etc/systemd/network/25\-tunnel\-ipip\&.netdev
[NetDev]
Name=ipip\-tun
Kind=ipip
      
.fi
.if n \{\
.RE
.\}
.sp


      
.sp
.if n \{\
.RS 4
.\}
.nf
/etc/systemd/network/25\-tunnel\-sit\&.netdev
[NetDev]
Name=sit\-tun
Kind=sit
      
.fi
.if n \{\
.RE
.\}
.sp


      
.sp
.if n \{\
.RS 4
.\}
.nf
/etc/systemd/network/25\-tunnel\-gre\&.netdev
[NetDev]
Name=gre\-tun
Kind=gre
      
.fi
.if n \{\
.RE
.\}
.sp


      
.sp
.if n \{\
.RS 4
.\}
.nf
/etc/systemd/network/25\-tunnel\-vti\&.netdev
[NetDev]
Name=vti\-tun
Kind=vti
      
.fi
.if n \{\
.RE
.\}
.sp


      .PP
This will bring interface
ens1
up and create an IPIP tunnel, a SIT tunnel, a GRE tunnel, and a VTI tunnel using it\&.

    


    .PP
\fBExample\ \&6.\ \&A bond device\fR

      

      
.sp
.if n \{\
.RS 4
.\}
.nf
# /etc/systemd/network/30\-bond1\&.network
[Match]
Name=bond1

[Network]
DHCP=ipv6
.fi
.if n \{\
.RE
.\}
.sp


      
.sp
.if n \{\
.RS 4
.\}
.nf
# /etc/systemd/network/30\-bond1\&.netdev
[NetDev]
Name=bond1
Kind=bond
.fi
.if n \{\
.RE
.\}
.sp


      
.sp
.if n \{\
.RS 4
.\}
.nf
# /etc/systemd/network/30\-bond1\-dev1\&.network
[Match]
MACAddress=52:54:00:e9:64:41

[Network]
Bond=bond1
.fi
.if n \{\
.RE
.\}
.sp


      
.sp
.if n \{\
.RS 4
.\}
.nf
# /etc/systemd/network/30\-bond1\-dev2\&.network
[Match]
MACAddress=52:54:00:e9:64:42

[Network]
Bond=bond1
.fi
.if n \{\
.RE
.\}
.sp


    .PP
This will create a bond device
bond1
and enslave the two devices with MAC addresses 52:54:00:e9:64:41 and 52:54:00:e9:64:42 to it\&. IPv6 DHCP will be used to acquire an address\&.

    


    .PP
\fBExample\ \&7.\ \&Virtual Routing and Forwarding (VRF)\fR

      
      .PP
Add the
bond1
interface to the VRF master interface
vrf1\&. This will redirect routes generated on this interface to be within the routing table defined during VRF creation\&. For kernels before 4\&.8 traffic won\*(Aqt be redirected towards the VRFs routing table unless specific ip\-rules are added\&.

      
.sp
.if n \{\
.RS 4
.\}
.nf
# /etc/systemd/network/25\-vrf\&.network
[Match]
Name=bond1

[Network]
VRF=vrf1
.fi
.if n \{\
.RE
.\}
.sp

    


    .PP
\fBExample\ \&8.\ \&MacVTap\fR

      
      .PP
This brings up a network interface
macvtap\-test
and attaches it to
enp0s25\&.

      
.sp
.if n \{\
.RS 4
.\}
.nf
# /usr/lib/systemd/network/25\-macvtap\&.network
[Match]
Name=enp0s25

[Network]
MACVTAP=macvtap\-test
.fi
.if n \{\
.RE
.\}
.sp

    

  

  .SH "SEE ALSO"

    
    .PP
\fBsystemd\fR(1),
\fBsystemd-networkd.service\fR(8),
\fBsystemd.link\fR(5),
\fBsystemd.netdev\fR(5),
\fBsystemd-resolved.service\fR(8)

  
.SH "NOTES"
.IP " 1." 4
Link-Local Multicast Name Resolution
.RS 4
\%https://tools.ietf.org/html/rfc4795
.RE
.IP " 2." 4
Multicast DNS
.RS 4
\%https://tools.ietf.org/html/rfc6762
.RE
.IP " 3." 4
DNS-over-TLS
.RS 4
\%https://tools.ietf.org/html/rfc7858
.RE
.IP " 4." 4
DNSSEC
.RS 4
\%https://tools.ietf.org/html/rfc4033
.RE
.IP " 5." 4
IEEE 802.1AB-2016
.RS 4
\%https://standards.ieee.org/findstds/standard/802.1AB-2016.html
.RE
.IP " 6." 4
ip-sysctl.txt
.RS 4
\%https://www.kernel.org/doc/Documentation/networking/ip-sysctl.txt
.RE
.IP " 7." 4
RFC 4941
.RS 4
\%https://tools.ietf.org/html/rfc4941
.RE
.IP " 8." 4
RFC 1027
.RS 4
\%https://tools.ietf.org/html/rfc1027
.RE
.IP " 9." 4
RFC 6275
.RS 4
\%https://tools.ietf.org/html/rfc6275
.RE
.IP "10." 4
RFC 4862
.RS 4
\%https://tools.ietf.org/html/rfc4862
.RE
.IP "11." 4
RFC 3041
.RS 4
\%https://tools.ietf.org/html/rfc3041
.RE
.IP "12." 4
RFC 3484
.RS 4
\%https://tools.ietf.org/html/rfc3484
.RE
.IP "13." 4
RFC4191
.RS 4
\%https://tools.ietf.org/html/rfc4191
.RE
.IP "14." 4
RFC 7844
.RS 4
\%https://tools.ietf.org/html/rfc7844
.RE
.IP "15." 4
RFC 3315
.RS 4
\%https://tools.ietf.org/html/rfc3315#section-17.2.1
.RE
.IP "16." 4
RFC 4861
.RS 4
\%https://tools.ietf.org/html/rfc4861
.RE
